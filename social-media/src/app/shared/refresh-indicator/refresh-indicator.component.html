<div class="refresh-container">
  <!-- Pull to refresh indicator -->
  @if (show) {
  <div class="pull-indicator">
    <div class="spinner-wrapper">
      <lucide-angular [img]="refreshIcon" class="spinning-icon"></lucide-angular>
    </div>
    <span>Refreshing...</span>
  </div>
  }

  <!-- New posts indicator (Minimalist Chip) -->
  @if (refreshService.showNewPostsIndicator()) {
  <div class="new-posts-chip-wrapper">
    <button class="new-posts-chip" (click)="onRefresh()">
      <lucide-angular [img]="arrowIcon" class="chip-icon"></lucide-angular>
      <span>
        {{ refreshService.getNewPostsCount() }} new post{{ refreshService.getNewPostsCount() !== 1 ? 's' : '' }}
      </span>
    </button>
  </div>
  }

  <!-- Last refreshed info -->
  <div class="refresh-info">
    <span class="last-refreshed">
      @if (refreshService.getLastRefreshed()) {
      <lucide-angular [img]="checkIcon" class="check-icon"></lucide-angular>
      <span>Updated {{ getFormattedTime() }}</span>
      } @else {
      <span>Not yet refreshed</span>
      }
    </span>

    <button class="auto-refresh-toggle" [class.active]="refreshService.isAutoRefreshEnabled()"
      (click)="toggleAutoRefresh()" title="Toggle auto-refresh">
      <span>Auto-refresh</span>
      <div class="toggle-switch">
        <div class="toggle-knob"></div>
      </div>
    </button>
  </div>
</div>